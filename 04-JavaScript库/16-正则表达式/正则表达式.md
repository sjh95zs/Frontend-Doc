# 正则表达式

1. 能做什么？

   - 查找特定字符：`exec()、test()、match()、search()等`
   - 替换文本：`replace`
   - 验证

2. 注意点？

   - 只能操作字符串
   - 由普通字符和特殊字符构成
   - 要有逆向思维
   - 多个正则组合使用，并非啥都用一个正则搞定

## 1、创建正则表达式

区别：

1. 字面量更简洁，但是规则写死了
2. 构造函数更灵活，规则可随时修改

### 1.1 字面量

```js
/.../gim;
```

### 1.2 构造函数

```js
new RegExp(变量, 'igm');
```

## 2、模式修饰符

> 可组合使用

- 忽略大小写：`i`
- 全局匹配：`g`
- 多行匹配：`m`

## 3、特殊字符

> 特殊字符需要用转义字符：`\`，包括`\`本身

1. 转义类

   - 制表符：`\t`
   - 换行符：`\n`
   - unicode 编码匹配中文：`[\u4e00-\u9fa5]`

2. 字符类

   - 匹配任意一个字符：`[...]`
   - 取反：`[^...]`
   - 范围：`[a-zA-Z0-9]`
   - 匹配除换行符之外的任意一个字符：`.`
   - 别名

     - `[a-zA-Z0-9_]`的别名是`\w`，取反是`\W`
     - `\s`匹配空格、制表符、换行符
     - `\d`等于`[0-9]`

3. 量词类

   - 贪婪重复（默认）

     - `{n,m}` 匹配 n 或 m 次
     - `{n,}` 匹配至少 n 次
     - `{n}` 匹配 n 次
     - `{0,1}`或`?` 匹配 0 或 1 次
     - `{1,}`或`+` 匹配至少 1 次
     - `{0,}`或`*` 匹配至少 0 次

   - 非贪婪重复：加上`?`

     - `{n,m}?`
     - `{n,}?`
     - `{n}?`
     - `{0,1}?`或`??`
     - `{1,}?`或`+?`
     - `{0,}?`或`*?`

4. 选择、分组和引用

   - 选择：`|` 匹配该符号左边或右边的内容
   - 捕获分组：`(...)` 捕获括号中的内容；
   - 非捕获分组：`(?:...)`
   - 引用：`\n` 第 n 个捕获分组的引用

5. 位置

   - 指定位置：`^...$` 开头是`^`，结尾是`$`
   - 单词边界：`\b`
   - 前瞻性匹配：`A(?=B)` A 后面是 B 才匹配 A 的内容
   - 非前瞻性匹配：`A(?!B)` A 后面不是 B 才匹配 A 的内容

## 4、RegExp 对象

### 4.1 方法

- 正则.test(字符串)：返回布尔值
- search(正则或字符串)：位置搜寻，返回索引值或-1
- split(正则或字符串)：拆分成数组

- 正则.exec(字符串)：返回数组或 null

  - 无论是否 g 模式，都会返回分组中匹配到的内容
  - 无论是否 g 模式，都只返回匹配到的内容，而非所有，只不过 g 模式可以继续匹配下去

- str.match(正则)：返回数组或 null

  - 只有非 g 模式，才会返回分组中匹配到的内容
  - g 模式，只会一次返回所有匹配到的字符

- str.replace(正则或字符串,替换成的文本或函数)：替换（**很常用**）

  - 非 g 模式，只替换第一个匹配到的内容
  - g 模式，替换所有匹配到的内容

- toString()：转为字符串
- toLocaleString()：转为本地特色字符串
- valueOf()：返回正则本身

### 4.2 属性

- ignoreCase：是否有 i，返回布尔值
- global：是否有 g，返回布尔值
- multiline：是否有 m，返回布尔值

## 5、常用正则表达式

- QQ：全数字，首位不为 0，最少 5 位

  - `/^[1-9]\d{4,}$/`

- 昵称：2-18 位，中英文，数字，下划线

  - `/^[\u4e00-\u9fa5a-zA-Z0-9_]{2,18}$/`
  - `/^[\u4e00-\u9fa5\w]{2,18}$/`

- 密码：6-16 位，区分大小写，不能有空白字符\s

  - `/^\S{6,16}$/`

- 去除字符串首尾的空白字符

  - `/^\s*|\s+$/g`

- 转驼峰

  - css：`background-color: red;`
  - js：`elem.style.backgroundColor = red;`
  - jq：`$(elem).css('background-color', 'red');`
  - `/-([a-z])/ig`

- 邮箱

- url

## 6、捕获到的内容返回

1. exec 返回的数组
2. `/\1/`模式
3. replace 的第二个参数中，`$1`
4. `RegExp.$1`
