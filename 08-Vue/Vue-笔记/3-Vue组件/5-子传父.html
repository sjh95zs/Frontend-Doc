<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>å­ä¼ çˆ¶</title>
    <script src="https://cdn.bootcss.com/vue/2.6.10/vue.js"></script>
  </head>
  <body>
    <div id="app">
      <button-counter @father-increment="incrementTotal"></button-counter>
      <p>{{ total }}</p>
    </div>

    <script>
      // å­ç»„ä»¶button-counter
      Vue.component("button-counter", {
        template: '<button @click="increment">ç‚¹èµğŸ‘</button>', // ã€1ã€‘ç‚¹å‡»äº‹ä»¶ click
        methods: {
          // ã€2ã€‘è°ƒç”¨å­ç»„ä»¶ button-counter çš„äº‹ä»¶å¥æŸ„
          increment: function() {
            this.$emit("father-increment", [1, "A"]); // ã€3ã€‘è§¦å‘çˆ¶ç»„ä»¶ app çš„è‡ªå®šä¹‰äº‹ä»¶ father-incrementï¼Œå¹¶æŠŠ [1, "A"] è¿™ä¸ªæ•°ç»„ä»¥çˆ¶ç»„ä»¶äº‹ä»¶å¥æŸ„incrementTotalçš„å‚æ•°ï¼Œæ¥ä¼ ç»™çˆ¶ç»„ä»¶
          }
        }
      });

      // çˆ¶ç»„ä»¶app
      new Vue({
        el: "#app",
        data: {
          total: 0
        },
        methods: {
          // ã€4ã€‘è°ƒç”¨çˆ¶ç»„ä»¶ app çš„äº‹ä»¶å¥æŸ„
          incrementTotal: function(data) {
            this.total += 1;
            console.log(data); // ç»“æœå°±æ˜¯å­ç»„ä»¶ä¼ è¿‡æ¥çš„é‚£ä¸ª [1, "A"] æ•°ç»„
          }
        }
      });

      /* 
        æœ¬èŠ‚å†…å®¹ï¼š
          è§£æï¼š
            æ³¨å†Œäº†ä¸€ä¸ªç»„ä»¶ button-counterï¼Œç„¶åè¿™ä¸ªç»„ä»¶åœ¨ app ç»„ä»¶é‡Œé¢è¢«è°ƒç”¨äº†ï¼Œæ‰€ä»¥ button-counter æ˜¯ app çš„å­ç»„ä»¶
            çˆ¶ç»„ä»¶ app é€šè¿‡ v-on:è‡ªå®šä¹‰äº‹ä»¶='äº‹ä»¶å¥æŸ„' ç»‘å®šä¸€ä¸ªäº‹ä»¶å¥æŸ„ï¼Œå½“å­ç»„ä»¶ this.$emit('xxxx'ï¼Œ[data]) è¢«è°ƒç”¨æ—¶è§¦å‘è¿™ä¸ª'äº‹ä»¶å¥æŸ„'
          æ€»ç»“ï¼š
            é€šè¿‡$emitäº‹ä»¶ï¼šå­ç»„ä»¶äº‹ä»¶click â†’ å­ç»„ä»¶äº‹ä»¶å¥æŸ„increment â†’ çˆ¶ç»„ä»¶father-increment + ä¼ å‡ºä¸€ä¸ªæ•°ç»„ â†’ çˆ¶ç»„ä»¶äº‹ä»¶å¥æŸ„incrementTotal + æ¥æ”¶é‚£ä¸ªæ•°ç»„
       */
    </script>
  </body>
</html>
