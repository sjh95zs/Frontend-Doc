# çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶åŠé€šä¿¡

## å…³ç³»

1. çˆ¶ç»„ä»¶å¯ä»¥ä½¿ç”¨ `props` æŠŠæ•°æ®ä¼ ç»™å­ç»„ä»¶ï¼Œåˆ†ä¸ºåŠ¨æ€å’Œé™æ€ 2 ç§ï¼Œè€Œä¸”æ˜¯å•å‘çš„ï¼ˆåªèƒ½çˆ¶ä¼ å­ï¼‰
2. å­ç»„ä»¶å¯ä»¥ä½¿ç”¨ `this.$emit('è‡ªå®šä¹‰äº‹ä»¶'ï¼Œdata)` è§¦å‘çˆ¶ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶å¹¶ä¼ å€¼
   - è‡ªå®šä¹‰äº‹ä»¶æ˜¯æŒ‡çˆ¶ç»„ä»¶çš„
   - data æ˜¯ä¼ é€’ç»™çˆ¶ç»„ä»¶çš„**å¯é€‰**æ•°æ®ï¼Œ**ä»»æ„æ•°æ®ç±»å‹**

- çˆ¶ç»„ä»¶é€šè¿‡ `v-on:è‡ªå®šä¹‰äº‹ä»¶ = 'äº‹ä»¶å¥æŸ„'` ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œå½“å­ç»„ä»¶ `this.$emit('è‡ªå®šä¹‰äº‹ä»¶'ï¼Œdata)` è¢«è°ƒç”¨æ—¶è§¦å‘è¿™ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œå®ç°çˆ¶ç»„ä»¶çš„'äº‹ä»¶å¥æŸ„'
- è‡³äºè°æ˜¯å­ç»„ä»¶è°æ˜¯çˆ¶ç»„ä»¶ï¼Œçœ‹è°ƒç”¨å°±å¯ä»¥äº†ï¼Œè°è¢«è°ƒç”¨è°å°±æ˜¯å­ç»„ä»¶ï¼ˆå³ `this.$emit` åœ¨è°çš„å†…éƒ¨ï¼Œè°å°±æ˜¯å­ç»„ä»¶ï¼‰

## æ‰©å±•

1. çˆ¶ä¼ å­ propsï¼šå­ç»„ä»¶æ¥æ”¶çš„çˆ¶ç»„ä»¶çš„å€¼åˆ†ä¸º â€” å¼•ç”¨ç±»å‹å’Œæ™®é€šç±»å‹

   - å­ç»„ä»¶ä¸­æ›´æ”¹**æ™®é€šç±»å‹**çš„å€¼ï¼Œä¸ä¼šå½±å“çˆ¶ç»„ä»¶çš„å€¼
   - å­ç»„ä»¶ä¸­æ›´æ”¹**å¼•ç”¨ç±»å‹**çš„å€¼ï¼Œçˆ¶ç»„ä»¶çš„å€¼ä¹Ÿä¼šä¿®æ”¹ï¼Œå…¶ä»–åŒæ ·å¼•ç”¨äº†æ”¹å€¼çš„å­ç»„ä»¶å†…éƒ¨çš„å€¼ä¹Ÿä¼šè·Ÿç€è¢«ä¿®æ”¹ã€‚ï¼ˆé™¤éä½ æœ‰ç‰¹æ®Šçš„è¦æ±‚è¿™ä¹ˆå»åšï¼Œå¦åˆ™æœ€å¥½ä¸è¦è¿™ä¹ˆåšï¼‰

## çˆ¶ä¼ å­

> çˆ¶ç»„ä»¶å¯ä»¥ä½¿ç”¨ `props` æŠŠæ•°æ®ä¼ ç»™å­ç»„ä»¶ï¼Œåˆ†ä¸ºåŠ¨æ€å’Œé™æ€ 2 ç§ï¼Œè€Œä¸”æ˜¯å•å‘çš„ï¼ˆåªèƒ½çˆ¶ä¼ å­ï¼‰

1. é™æ€ä¼ é€’ï¼šé v-bind

   ```html
   <div id="app">
     <!-- é™æ€ï¼štextçš„å€¼å°±æ˜¯å­—ç¬¦ä¸²"å“ˆå“ˆ" -->
     <ui-btn text="å“ˆå“ˆ"></ui-btn>
   </div>
   ```

   ```js
   // å­ç»„ä»¶
   Vue.component("ui-btn", {
     // åˆ›å»º text è‡ªå®šä¹‰å±æ€§
     props: ["text"],
     template: `<button>{{text}}</button>`
   });

   // çˆ¶ç»„ä»¶
   let app = new Vue({
     el: "#app"
   });
   ```

2. åŠ¨æ€ä¼ é€’ï¼šé€šè¿‡ v-bind æ¥å®ç°ï¼Œä¼ é€’çš„å€¼å¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»å‹ï¼ˆä¸€èˆ¬æ¥è¯´ï¼Œå¤§å¤šçš„æ•°æ®éƒ½æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼‰

   ```html
   <div id="app">
     <!-- åŠ¨æ€ï¼šçˆ¶ç»„ä»¶appçš„dataä¸­çš„æ•°æ®ä¼ ç»™text -->
     <ui-btn :text="A"></ui-btn>
     <ui-btn :text="B"></ui-btn>
     <ui-btn :text="C"></ui-btn>
   </div>
   ```

   ```js
   // å­ç»„ä»¶
   Vue.component("ui-btn", {
     // åˆ›å»º text è‡ªå®šä¹‰å±æ€§
     props: ["text"],
     template: `<button>{{text}}</button>`
   });

   // çˆ¶ç»„ä»¶
   let app = new Vue({
     el: "#app",
     data: {
       A: "a",
       B: "b",
       C: "c"
     }
   });
   ```

## å­ä¼ çˆ¶

> å­ç»„ä»¶å¯ä»¥ä½¿ç”¨ `this.$emit('è‡ªå®šä¹‰äº‹ä»¶'ï¼Œdata)` è§¦å‘çˆ¶ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶å¹¶ä¼ å€¼

```html
<div id="app">
  <button-counter v-on:father-increment="incrementTotal"></button-counter>
  <p>{{ total }}</p>
</div>
```

```js
// å­ç»„ä»¶button-counter
Vue.component("button-counter", {
  template: '<button v-on:click="increment">ç‚¹èµğŸ‘</button>', // ã€1ã€‘ç‚¹å‡»äº‹ä»¶ click
  methods: {
    // ã€2ã€‘è°ƒç”¨å­ç»„ä»¶ button-counter çš„äº‹ä»¶å¥æŸ„
    increment: function() {
      this.$emit("father-increment", [1, "A"]); // ã€3ã€‘è§¦å‘çˆ¶ç»„ä»¶ app çš„è‡ªå®šä¹‰äº‹ä»¶ father-incrementï¼Œå¹¶æŠŠ [1, "A"] è¿™ä¸ªæ•°ç»„ä»¥çˆ¶ç»„ä»¶äº‹ä»¶å¥æŸ„incrementTotalçš„å‚æ•°ï¼Œæ¥ä¼ ç»™çˆ¶ç»„ä»¶
    }
  }
});

// çˆ¶ç»„ä»¶app
new Vue({
  el: "#app",
  data: {
    total: 0
  },
  methods: {
    // ã€4ã€‘è°ƒç”¨çˆ¶ç»„ä»¶ app çš„äº‹ä»¶å¥æŸ„
    incrementTotal: function(data) {
      this.total += 1;
      console.log(data); // ç»“æœå°±æ˜¯å­ç»„ä»¶ä¼ è¿‡æ¥çš„é‚£ä¸ª [1, "A"] æ•°ç»„
    }
  }
});

// è§£æï¼š
//   æ³¨å†Œäº†ä¸€ä¸ªç»„ä»¶ button-counterï¼Œç„¶åè¿™ä¸ªç»„ä»¶åœ¨ app ç»„ä»¶é‡Œé¢è¢«è°ƒç”¨äº†ï¼Œæ‰€ä»¥ button-counter æ˜¯ app çš„å­ç»„ä»¶
//   çˆ¶ç»„ä»¶ app é€šè¿‡ v-on:è‡ªå®šä¹‰äº‹ä»¶='äº‹ä»¶å¥æŸ„' ç»‘å®šä¸€ä¸ªäº‹ä»¶å¥æŸ„ï¼Œå½“å­ç»„ä»¶ this.$emit('xxxx'ï¼Œ[data]) è¢«è°ƒç”¨æ—¶è§¦å‘è¿™ä¸ª'äº‹ä»¶å¥æŸ„'
// æ€»ç»“ï¼š
//   å­ç»„ä»¶äº‹ä»¶click â†’ å­ç»„ä»¶äº‹ä»¶å¥æŸ„increment â†’ çˆ¶ç»„ä»¶father-increment + ä¼ å‡ºä¸€ä¸ªæ•°ç»„ â†’ çˆ¶ç»„ä»¶äº‹ä»¶å¥æŸ„incrementTotal + æ¥æ”¶é‚£ä¸ªæ•°ç»„
```
